import Head from 'next/head'
import Link from 'next/link'
import Image from 'next/image'
import styles from '../styles/Home.module.css'
import Hero from '../components/Hero'
import Breadcrumbs from '../components/Breadcrumbs'

export async function getStaticProps() {
    const res = await fetch('http://127.0.0.1:8000/api/player-stats-data')
    const players = await res.json()
    return {
      props: {
        players,
      },
    }
}


// https://react-data-table-component.netlify.app/?path=/story/getting-started-intro--page

export default function StatsGiocatori(props) {

    return (
        <div>
        <Head>
            <title>Statistiche Giocatori Fantacalcio</title>
            <meta name="description" content="Generated by create next app" />
            <link rel="icon" href="/favicon.ico" />
        </Head>

        <main className="pt-16">
            <Hero
                title="Statistiche giocatori Fantcalcio"
                desc="Analisi di dati statistici dei giocatori di Serie A negli ultimi anni"
                />

            <div className="container px-4 pb-4">
                <div className="overflow-x-auto">
                    <table className="table w-full">
                        <thead>
                        <tr>
                            <th>Nome</th>
                            <th><div className="cursor-pointer tooltip tooltip-right z-40" data-tip="Ruolo">R</div></th>
                            <th><div className="cursor-pointer tooltip tooltip-right z-40" data-tip="Squadra">Sq.</div></th>
                            <th><div className="cursor-pointer tooltip tooltip-right z-50" data-tip="Partite medie giocate in un anno">PG</div></th>
                            <th><div className="cursor-pointer tooltip tooltip-right z-40" data-tip="Media voto">MV</div></th>
                            <th><div className="cursor-pointer tooltip tooltip-right z-30" data-tip="Fanta Media Voto">FM</div></th>
                        </tr>
                        </thead>
                        <tbody>
                            {props.players.map(function (player) {
                                return (
                                    <>
                                    <tr>
                                        <td>
                                            <Link href={"/giocatore/" + player.fid }>
                                                <a>
                                                    {player.name}
                                                </a>
                                            </Link>
                                        </td>
                                        <td>{player.role}</td>
                                        <td>{player.team}</td>
                                        <td>{player.pg}</td>
                                        <td>{player.mv.toFixed(2)}</td>
                                        <td>{player.mf.toFixed(2)}</td>
                                    </tr>
                                    </>
                                );
                            })}
                        </tbody>
                    </table>
                </div>
            </div>

        </main>

        </div>
    )
}
